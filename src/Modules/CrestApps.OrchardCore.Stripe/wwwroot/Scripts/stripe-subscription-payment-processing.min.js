function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}stripePaymentProcessing={initialize:function(e){var t=_objectSpread(_objectSpread({},{processorKey:"Stripe",cardElement:"#card-element"}),e);document.addEventListener("DOMContentLoaded",(function(){var e,n=document.getElementById("card-errors"),r=function(e){n.textContent=e,n.classList.remove("d-none")},o=Stripe(t.publishableKey),i=o.elements(),a=function(e){if(!e)return{};var t=window.getComputedStyle(e),n={};return["margin","padding","color","font-family","font-size","line-height","border-width","border-style","border-color"].forEach((function(e){n[e]=t.getPropertyValue(e)})),n}(t.nameOnBankCardElement),c={base:{color:(e=a).color||"black",fontSize:e["font-size"]||"16px",fontFamily:e["font-family"]||"Arial, sans-serif",lineHeight:e["line-height"]||"1.4",border:"".concat(e["border-width"]||"1px"," ").concat(e["border-style"]||"solid"," ").concat(e["border-color"]||"black")}},s=i.create("card",{style:c});s.mount(t.cardElement),s.on("change",(function(e){n.textContent="",n.classList.add("d-none"),t.enablePayButtonButton(!0),e.error&&r(e.error.message)})),t.payButtonElement.addEventListener("click",(function(e){t.payButtonElement.getAttribute("data-method-name")==t.processorKey&&(e.preventDefault(),!t.nameOnBankCardElement||t.nameOnBankCardElement.value?(t.enablePayButtonButton(!1),o.createPaymentMethod({type:"card",card:s,billing_details:{name:t.nameOnBankCardElement.value||""}}).then((function(e){e.error?r(e.error.message):fetch(t.stepIntentEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e.paymentMethod.id,sessionId:t.sessionId})}).then((function(e){return e.json()})).then((function(e){e.error?r(e.error):o.confirmCardSetup(e.clientSecret).then((function(n){if(n.error)r(n.error.message);else{var i=n.setupIntent.payment_method;e.processInitialPayment?fetch(t.paymentIntentEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:e.customerId,paymentMethodId:i,sessionId:t.sessionId})}).then((function(e){return e.json()})).then((function(t){t.error?r(t.error):o.confirmCardPayment(t.clientSecret).then((function(t){t.error?r(t.error.message):d(e.customerId,i)}))})):d(e.customerId,i)}}))}))}))):r(t.invalidNameErrorMessage))}));var d=function(e,n){fetch(t.subscriptionEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:e,paymentMethodId:n,sessionId:t.sessionId})}).then((function(e){return e.json()})).then((function(e){if(e.error)r(e.error);else{var n=t.formElement;if("requires_action"==e.status)o.confirmCardPayment(e.clientSecret).then((function(e){if(e.error)r(e.error.message);else{var t=new Event("submit",{bubbles:!0,cancelable:!0});n.dispatchEvent(t)}}));else{var i=new Event("submit",{bubbles:!0,cancelable:!0});n.dispatchEvent(i)}}}))}}))}};
