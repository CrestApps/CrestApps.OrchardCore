stripePaymentProcessing={initialize:function(e){document.addEventListener("DOMContentLoaded",(function(){var n,t=document.getElementById("card-errors"),r=function(e){t.textContent=e,t.classList.remove("d-none")},o=Stripe(e.publishableKey),a=o.elements(),i=function(e){if(!e)return{};var n=window.getComputedStyle(e),t={};return["margin","padding","color","font-family","font-size","line-height","border-width","border-style","border-color"].forEach((function(e){t[e]=n.getPropertyValue(e)})),t}(e.nameOnBankCardElement),s={base:{color:(n=i).color||"black",fontSize:n["font-size"]||"16px",fontFamily:n["font-family"]||"Arial, sans-serif",lineHeight:n["line-height"]||"1.4",border:"".concat(n["border-width"]||"1px"," ").concat(n["border-style"]||"solid"," ").concat(n["border-color"]||"black")}},d=a.create("card",{style:s});d.mount("#card-element"),d.on("change",(function(n){t.textContent="",t.classList.add("d-none"),e.enablePayButtonButton(!0),n.error&&r(n.error.message)})),e.payButtonElement.addEventListener("click",(function(n){"Stripe"==e.payButtonElement.getAttribute("data-method-name")&&(!e.nameOnBankCardElement||e.nameOnBankCardElement.value?(n.preventDefault(),e.enablePayButtonButton(!1),o.createPaymentMethod({type:"card",card:d,billing_details:{name:nameOnBankCardElement.value||""}}).then((function(n){n.error?r(n.error.message):fetch(e.stepIntentEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:n.paymentMethod.id,sessionId:e.sessionId})}).then((function(e){return e.json()})).then((function(n){n.error?r(n.error):o.confirmCardSetup(n.clientSecret).then((function(t){if(t.error)r(t.error.message);else{var a=t.setupIntent.payment_method;n.processInitialPayment?fetch(e.paymentIntentEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:n.customerId,paymentMethodId:a,sessionId:e.sessionId})}).then((function(e){return e.json()})).then((function(e){e.error?r(e.error):o.confirmCardPayment(e.clientSecret).then((function(e){e.error?r(e.error.message):c(n.customerId,a)}))})):c(n.customerId,a)}}))}))}))):r(e.invalidNameErrorMessage))}));var c=function(n,t){fetch(e.subscriptionEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:n,paymentMethodId:t,sessionId:e.sessionId})}).then((function(e){return e.json()})).then((function(e){if(e.error)r(e.error);else{var n=document.getElementById("subscription-form");if("requires_action"==e.status)o.confirmCardPayment(e.clientSecret).then((function(e){if(e.error)r(e.error.message);else{var t=new Event("submit",{bubbles:!0,cancelable:!0});n.dispatchEvent(t)}}));else{var t=new Event("submit",{bubbles:!0,cancelable:!0});n.dispatchEvent(t)}}}))}}))}};
