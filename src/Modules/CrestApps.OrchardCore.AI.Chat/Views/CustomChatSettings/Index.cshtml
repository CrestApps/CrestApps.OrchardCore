@using CrestApps.OrchardCore.Core.Models
@using OrchardCore.ContentManagement
@using CrestApps.OrchardCore.AI.Chat.Models

@model ListCatalogEntryViewModel<ContentItem>

<zone Name="Title">
    <h1>@RenderTitleSegments(T["Custom Chat Instances"])</h1>
</zone>

<div class="card text-bg-theme mb-3 position-sticky action-bar">
    <div class="card-body">
        <div class="row gx-3">
            <div class="col-auto">
                <a asp-controller="CustomChatSettings"
                   asp-action="Create"
                   class="btn btn-primary"
                   role="button">
                    <i class="fa-solid fa-plus"></i> @T["Create Instance"]
                </a>
            </div>
        </div>
    </div>
</div>

<ul class="list-group">
    @foreach (var item in Model.Models)
    {
        var part = item.As<CustomChatPart>();

        <li class="list-group-item">
            <div class="row align-items-center">
                <div class="col">
                    <h5 class="mb-1">
                        <a asp-controller="CustomChatSettings"
                           asp-action="Edit"
                           asp-route-contentItemId="@item.ContentItemId">
                            @part.Title
                        </a>
                    </h5>

                    <small class="text-muted">
                        Created: @part.CreatedUtc.ToLocalTime().ToString("g")
                    </small>
                </div>

                <div class="col-auto">
                    @* <a asp-controller="CustomChatSettings"
                       asp-action="Edit"
                       asp-route-contentItemId="@item.ContentItemId"
                       class="btn btn-outline-primary btn-sm">
                        @T["Edit"]
                    </a> *@

                    <form asp-controller="CustomChatSettings"
                          asp-action="Delete"
                          asp-route-contentItemId="@item.ContentItemId"
                          method="post"
                          style="display:inline;">
                        <button class="btn btn-outline-danger btn-sm">
                            @T["Delete"]
                        </button>
                    </form>
                </div>
            </div>
        </li>
    }
</ul>
