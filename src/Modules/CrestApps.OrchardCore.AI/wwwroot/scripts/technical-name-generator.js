/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

(function () {
  // Expose initializer globally so views can call it with specific field IDs.
  function toTitleCaseNoSpaces(value) {
    return (value || '').trim()
    // split on whitespace or common separators or any non-alphanumeric
    .split(/[^A-Za-z0-9]+/).filter(function (w) {
      return w.length > 0;
    }).map(function (w) {
      return w.charAt(0).toUpperCase() + w.slice(1).toLowerCase();
    }).join('');
  }
  function initAutoGenerateTechnicalName(displayId, nameId) {
    if (!displayId || !nameId) return;
    document.addEventListener('DOMContentLoaded', function () {
      var displayEl = document.getElementById(displayId);
      var nameEl = document.getElementById(nameId);
      if (!displayEl || !nameEl) return;

      // Track whether the user has entered a non-empty value in the Name field.
      var userEdited = nameEl.value.trim() !== '';

      // Resume auto-generation only when the Name field is empty again.
      nameEl.addEventListener('input', function () {
        userEdited = nameEl.value.trim() !== '';
      });

      // Generate on keyup as requested
      displayEl.addEventListener('keyup', function () {
        if (userEdited) return;
        var generated = toTitleCaseNoSpaces(displayEl.value || '');
        nameEl.value = generated;
      });
    });
  }

  // Automatically initialize for any elements using the data attributes.
  document.addEventListener('DOMContentLoaded', function () {
    var autoEls = document.querySelectorAll('[data-auto-tech-name]');
    for (var i = 0; i < autoEls.length; i++) {
      var el = autoEls[i];
      var displayId = el.getAttribute('data-display-id');
      var nameId = el.getAttribute('data-name-id');
      if (displayId && nameId) {
        // call initializer immediately (it will attach listeners)
        initAutoGenerateTechnicalName(displayId, nameId);
      }
    }
  });
  window.initAutoGenerateTechnicalName = initAutoGenerateTechnicalName;
})();