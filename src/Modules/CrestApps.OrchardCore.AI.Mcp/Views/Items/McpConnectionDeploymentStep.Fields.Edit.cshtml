@using CrestApps.OrchardCore.AI.Deployments.ViewModels
@using CrestApps.OrchardCore.AI.Mcp.Deployments.ViewModels

@model McpConnectionStepViewModel

<h5 class="mb-3">@T["MCP Connection"]</h5>

<div class="mb-3">
    <div class="form-check">
        <label class="form-check-label">
            <input class="form-check-input" asp-for="IncludeAll" data-bs-toggle="collapse" role="button" data-bs-target="#connections-list" aria-expanded="false" aria-controls="connections-list" />
            @T["Include all MCP connections"]
        </label>
    </div>
</div>

<div id="connections-list" class="collapse@(Model.IncludeAll ? string.Empty : " show")">
    <div class="hint mb-1">@T["The MCP connection to export as part of the plan."]</div>

    <ul class="list-group mb-3">
        @for (int i = 0; i < Model.Connections.Length; i++)
        {
            var option = Model.Connections[i];
            <li class="list-group-item">
                <div class="form-check">
                    <label class="form-check-label">
                        <input class="form-check-input"
                               type="checkbox"
                               name="@Html.NameFor(m => m.Connections[i].Selected)"
                               value="true"
                        @(option.Selected ? "checked" : "") />
                        <input type="hidden" name="@Html.NameFor(m => m.Connections[i].Text)" value="@option.Text" />
                        <input type="hidden" name="@Html.NameFor(m => m.Connections[i].Value)" value="@option.Value" />
                        @option.Text
                    </label>
                </div>
            </li>
        }
    </ul>

</div>
